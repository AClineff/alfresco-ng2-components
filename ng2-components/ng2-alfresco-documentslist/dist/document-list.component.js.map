{"version":3,"sources":["document-list.component.ts"],"names":[],"mappings":"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","file":"document-list.component.js","sourcesContent":["import {Component, OnInit, Input, Output, EventEmitter} from \"angular2/core\";\nimport {AlfrescoService} from \"./alfresco.service\";\nimport {FolderEntity} from \"./core/entities/folder.entity\";\nimport {DocumentEntity} from \"./core/entities/document.entity\";\n\n@Component({\n    selector: 'alfresco-document-list',\n    styles: [\n        `\n            :host .breadcrumb {\n                margin-bottom: 4px;\n            }\n\n            :host .folder-icon {\n                float: left;\n                margin-right: 10px;\n            }\n\n            :host .file-icon {\n                width: 52px;\n                height: 52px;\n                float: left;\n                margin-right: 10px;\n            }\n\n            :host .document-header:hover {\n                text-decoration: underline;\n            }\n\n            :host .download-button {\n                color: #777;\n                text-decoration: none;\n            }\n\n            :host .download-button:hover {\n                color: #555;\n            }\n        `\n    ],\n    template: `\n        <ol *ngIf=\"breadcrumb\" class=\"breadcrumb\">\n            <li *ngFor=\"#r of route; #last = last\" [class.active]=\"last\" [ngSwitch]=\"last\">\n                <span *ngSwitchWhen=\"true\">{{r.name}}</span>\n                <a *ngSwitchDefault href=\"#\" (click)=\"goToRoute(r, $event)\">{{r.name}}</a>\n            </li>\n        </ol>\n        <div *ngIf=\"folder\" class=\"list-group\">\n            <a href=\"#\" *ngIf=\"canNavigateParent()\" (click)=\"onNavigateParentClick($event)\" class=\"list-group-item\">\n                <i class=\"fa fa-level-up\"></i> ...\n            </a>\n            <a href=\"#\" *ngFor=\"#document of folder.items\" (click)=\"onItemClick(document, $event)\" class=\"list-group-item clearfix\">\n                <a *ngIf=\"downloads && !document.isFolder\" href=\"{{getContentUrl(document)}}\" (click)=\"onDownloadClick($event)\" class=\"download-button pull-right\" download target=\"_blank\">\n                    <i class=\"fa fa-download fa-2x\"></i>\n                </a>\n                <i *ngIf=\"thumbnails && document.isFolder\" class=\"folder-icon {{folderIconClass}}\"></i>\n                <img *ngIf=\"thumbnails && !document.isFolder\" class=\"file-icon\" src=\"{{getDocumentThumbnailUrl(document)}}\">\n                <h4 class=\"list-group-item-heading document-header\">\n                    {{document.displayName}}\n                </h4>\n                <p class=\"list-group-item-text\">{{document.description}}</p>\n                <small>\n                    Modified {{document.modifiedOn}} by {{document.modifiedBy}}\n                </small>\n            </a>\n        </div>\n    `/*,\n    providers: [AlfrescoService]*/\n})\nexport class DocumentList implements OnInit {\n\n    // example: <alfresco-document-list [navigate]=\"false\"></alfresco-document-list>\n    @Input() navigate: boolean = true;\n    // example: <alfresco-document-list [breadcrumb]=\"true\"></alfresco-document-list>\n    @Input() breadcrumb: boolean = false;\n    // example: <alfresco-document-list folder-icon-class=\"fa fa-folder fa-4x\"></alfresco-document-list>\n    @Input('folder-icon-class') folderIconClass: string = 'fa fa-folder-o fa-4x';\n    // example: <alfresco-document-list #list [thumbnails]=\"false\"></alfresco-document-list>\n    @Input() thumbnails: boolean = true;\n    // example: <alfresco-document-list #list [downloads]=\"false\"></alfresco-document-list>\n    @Input() downloads: boolean = true;\n\n    @Output() itemClick: EventEmitter<any> = new EventEmitter();\n\n    rootFolder = {\n        name: 'Document Library',\n        path: 'swsdp/documentLibrary'\n    };\n    currentFolderPath: string = 'swsdp/documentLibrary';\n    folder: FolderEntity;\n    errorMessage;\n\n    route: any[] = [];\n\n    canNavigateParent(): boolean {\n        return this.navigate &&\n            !this.breadcrumb &&\n            this.currentFolderPath !== this.rootFolder.path;\n    }\n\n    constructor (\n        private _alfrescoService: AlfrescoService\n    ) {}\n\n    ngOnInit() {\n        this.route.push(this.rootFolder);\n        this.displayFolderContent(this.rootFolder.path);\n    }\n\n    private displayFolderContent(path) {\n        this.currentFolderPath = path;\n        this._alfrescoService\n            .getFolder(path)\n            .subscribe(\n                folder => this.folder = folder,\n                error => this.errorMessage = <any>error\n            );\n    }\n\n    onNavigateParentClick($event) {\n        if ($event) {\n            $event.preventDefault();\n        }\n\n        if (this.navigate) {\n            this.route.pop();\n            var parent = this.route.length > 0 ? this.route[this.route.length - 1] : this.rootFolder;\n            if (parent) {\n                this.displayFolderContent(parent.path);\n            }\n        }\n    }\n\n    onDownloadClick(event) {\n        event.stopPropagation();\n    }\n\n    onItemClick(item: DocumentEntity, $event) {\n        if ($event) {\n            $event.preventDefault();\n        }\n\n        this.itemClick.emit({\n            value: item\n        });\n\n        if (this.navigate && item) {\n            if (item.isFolder) {\n                var path = this.getItemPath(item);\n                this.route.push({\n                    name: item.displayName,\n                    path: path\n                });\n                this.displayFolderContent(path);\n            }\n        }\n    }\n\n    goToRoute(r, $event) {\n        if ($event) {\n            $event.preventDefault();\n        }\n\n        if (this.navigate) {\n            var idx = this.route.indexOf(r);\n            if (idx > -1) {\n                this.route.splice(idx + 1);\n                this.displayFolderContent(r.path);\n            }\n        }\n    }\n\n    private getItemPath(item: DocumentEntity):string {\n        var container = item.location.container;\n        var path = item.location.path !== '/' ? (item.location.path + '/' ) : '/';\n        var relativePath = container + path + item.fileName;\n        return item.location.site + '/' + relativePath;\n    }\n\n    getContentUrl(document: DocumentEntity) {\n        return this._alfrescoService.getContentUrl(document);\n    }\n\n    getDocumentThumbnailUrl(document:  DocumentEntity) {\n        return this._alfrescoService.getDocumentThumbnailUrl(document);\n    }\n}\n"],"sourceRoot":"/source/"}